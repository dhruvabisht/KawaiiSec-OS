#!/bin/bash

# KawaiiSec OS Live-Build Build Script
# Executes the main ISO build process

set -e

echo "ğŸš€ Starting KawaiiSec OS ISO build process..."

# Check dependencies
if ! command -v lb &> /dev/null; then
    echo "âŒ Error: live-build not installed. Please run: sudo apt install live-build"
    exit 1
fi

# Execute build
lb build noauto "${@}" 2>&1 | tee build.log

# Check if build was successful
if [ -f live-image-amd64.hybrid.iso ]; then
    echo "âœ… KawaiiSec OS ISO build completed successfully!"
    echo "ğŸ“¦ ISO location: $(pwd)/live-image-amd64.hybrid.iso"
    echo "ğŸ“Š ISO size: $(du -h live-image-amd64.hybrid.iso | cut -f1)"
else
    echo "âŒ Build failed. Check build.log for details."
    exit 1
fi 